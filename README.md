# DroneDeploy Email Generation System

An AI-powered system for generating personalized outreach emails to conference speakers, specifically designed to invite them to visit DroneDeploy's booth for demos and free gifts.

## Quick Start

### 1. Configure Environment Variables

Edit `.env` file and add:
```bash
OPENAI_API_KEY=your_openai_api_key_here
SENDER_NAME=Your Name
SENDER_TITLE=Your Title
MAX_SPEAKERS=5  # Limit for testing, remove for full processing
```
### 2. Setup Environment
### If this script fails, run `chmod +x setup.sh`

```bash
# Run the automated setup script
./setup.sh

```

### 3. Activate a virtual environment
run `source venv/bin/activate`
The script should copy this command to your clip board

### 4. Run the System

#### Option A: Run Pipeline (Process existing CSV)
```bash
python main.py
```

## Notes on the `in` files. 
By default, this folder only has a single JSON file. As we run the `company_classifier` we add the company and their category to `company_classifications.json`. I did this for 2 reasons: 
  1. to cut down on calls to the LLM while testing and generating emails.
  2. represent an alternative path where we have this data stored in a database or existing CRM tool.

I added a base `company_classifications.json` file to cut down on initial calls. `speakers.csv` will be generated by `speaker_scraper.py` when `main.py` runs 


## Features

- **Company Classification**: Automatically categorizes companies into Builder, Owner, Partner, Competitor, or Other
- **AI-Powered Email Generation**: Creates personalized email content using OpenAI GPT-4
- **Web Scraping**: Scrapes speaker lists from conference websites
- **Competitor Filtering**: Automatically excludes competitors from email outreach
- **Batch Processing**: Handles large speaker lists efficiently with rate limiting
- **RESTful API**: FastAPI-based web service with comprehensive endpoints
- **CSV Output**: Generates structured output files for easy integration

## Project Structure

```
dd_gtm_ai_eng_exercise/
├── .env_sample          # Sample environment variables
├── main.py              # Pipeline script (process CSV files)
├── server.py            # FastAPI web server
├── setup.sh             # Automated setup script
├── requirements.txt     # Python dependencies
├── in/                  # Input files directory
│   └── speakers.csv     # Sample speaker data
├── out/                 # Output files directory
│   └── email_list.csv   # Generated email list
└── utils/               # Helper modules
    ├── __init__.py
    ├── config.py        # Configuration management
    ├── models.py        # Pydantic data models
    ├── company_classifier.py  # Company classification service
    ├── email_generator.py     # Email generation service
    ├── data_processor.py      # Data processing utilities
    └── speaker_scraper.py     # Web scraping utilities
```

## Output
If everything works as expected, `out/email_list.csv` should contain the custom emails for each speaker.

### Start Web Server 
---
This is mostly for testing the LLM calls in isolation.
```bash
python server.py
```

The server will be available at `http://localhost:8000`

## Usage

### Web Interface (when running server.py)

1. **Health Check**: Visit `http://localhost:8000/health`
2. **API Documentation**: Visit `http://localhost:8000/docs`
3. **Scrape Speakers**: Use `/scrape-website` to scrape conference websites
4. **Process Speakers**: Use `/process-speakers` to generate emails from CSV
5. **Classify Company**: Use `/classify-company` to test company classification
5. **Generate Emails**: Use `/generate-email` to get generated email list
